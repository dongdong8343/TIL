- 스프링 컨테이너

  - 스프링 컨테이너는 BeanFactory를 통해 IoC/DI를 제공한다. 이를 통해 우리가 관계 설정해주던 작업을 이제는 스프링 컨테이너를 통해서 할 수 있게됐고 객체 지향적으로 코드를 작성할 수 있게 됐다.

  - 이 컨테이너에 빈이라는 것을 등록해 필요할 때마다 가져다 사용하는 방식으로 동작한다.

    즉 매번 new 키워드를 통해 새로운 오브젝트를 만드는 것이 아니라 한 번 만들면 필요할 때 가져다 사용하는 방식이다.

    이렇게 하면 유저가 몇 만명 몰린다해도 오브젝트를 한 번만 만들기 때문에 오브젝트 생성에 의한 성능저하를 막을 수 있다.

    - 여기서 빈은 프로그램 동작에 필요한 오브젝트를 의미한다.

  - 기존의 코드에 스프링을 적용하면 아래와 같은 구조가 된다. BeanFactory에 ObjectFactory를 넘겨주는 이유는 BeanFactory는 어떤 애들을 빈으로 등록하고 의존 관계를 맺어줘야할지 모른다.

      <center>
      <img
          src="https://github.com/user-attachments/assets/1fdb8c32-9457-4922-979e-967ee91708ec"
          width="100%"
      />
      </center>

    그래서 이런 구성 정보를 가지고 있는 ObjectFactory를 넘겨주는 것이다.

  - 아래 코드와 같이 BeanFactory에 ObjectFactory를 넘겨주는 것을 확인할 수 있다.

    @Configuration이라는 어노테이션을 통해 구성 정보를 가지고 있다고 말해준다.

    @Bean 어노테이션을 통해서 빈을 생성하는 메서드라는 것을 명시해준다.

    ```java
    @Configuration
    public class ObjectFactory {
        @Bean
        public PaymentService paymentService() {
            return new PaymentService(exRateProvider());
        }

        @Bean
        public ExRateProvider exRateProvider() {
            return new SimpleExRateProvider();
        }
    }

    public class Client {

        public static void main(String[] args) throws IOException {
            BeanFactory beanFactory = new AnnotationConfigApplicationContext(ObjectFactory.class);
            PaymentService paymentService = beanFactory.getBean(PaymentService.class);

            Payment payment = paymentService.prepare(100L, "USD", BigDecimal.valueOf(50.7));
            System.out.println(payment);
        }

    }
    ```

  - DI

    - 외부에서 즉 BeanFactory가 의존 관계를 맺어준다.

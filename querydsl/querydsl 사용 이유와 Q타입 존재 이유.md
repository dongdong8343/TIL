그냥 JPQL을 사용해서 쿼리를 날리면 되지... 왜 굳이 querydsl을 사용해서 쿼리를 날려야 하는지 잘 몰랐었다.

항상 기술을 사용하기 전에 왜 사용하는지 알고 사용해야 그 기술의 효과를 제대로 볼 수 있다고 생각한다.

그래서 이번 글에서는 왜 사용하는지 짚고 넘어갈 것이다.

### querydsl 사용 이유

1. **자바 코드로 쿼리를 작성하기 때문에 컴파일 시점에 오류를 찾을 수 있다.**

   기존 jpql은 문자열로 쿼리를 작성한다. 그래서 컴파일 시점에 오류가 있어도 잡아내지 못한다. 즉 런타임에 오류를 알 수 있다는 말이다.

   하지만 querydsl은 컴파일 시점에 오류를 알 수 있기 때문에 빠르게 오류를 수정할 수 있다.

2. **동적 쿼리 문제를 해결할 수 있다.**

   상황에 따라 쿼리를 다르게 날리고 싶은 경우가 있다. 이런 경우 querydsl을 사용하면 깔끔하게 동적 쿼리를 날릴 수 있게 된다.

### Q 타입 사용 이유

추가로 querydsl을 사용할 때 그냥 엔티티를 사용해서 쿼리를 작성하면 안되나? 라는 생각을 했다. 굳이 Q 타입을 만들어야 하는건가?..

이 의문을 해소하기 위해서 한 번 검색을 해봤다.

이유는 다음과 같았다.

1. **컴파일 시점에 문법 오류를 잡을 수 있다.**

   기존 jpql은 문자열로 쿼리를 작성하는데 실수가 있다해도 컴파일 시점에 알지 못한다. (런타임 오류 극혐이야..)

2. **IDE 자동완성**

   → 속성 이름 직접 기억 안해도 됨

3. **엔티티에서 필드명을 바꾸면 Q타입도 자동으로 반영됨**

   → jpql 처럼 일일히 수정 안해도 된다.

정리를 하자면 엔티티는 DB에 접근하기 위해 사용되는 친구이고 Q 타입은 쿼리를 작성하기 위해 사용되는 친구로 서로 용도가 다르다고 생각하면된다.

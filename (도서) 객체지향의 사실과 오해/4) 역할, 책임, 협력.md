## 훌륭한 객체지향 설계

초보 개발자들은 협력이라는건 생각도 하지않은채 상태에 관해서만 생각을 하는 경우가 많다.

하지만 중요한 것은 협력을 보고 협력을 기반으로 책임을 생각하고 그에 맞는 상태를 생각하고 클래스를 구현해내는 것이다.

즉 조화를 이루며 적극적으로 상호작용하는 협력적인 객체를 창조하는 것을 말한다.

## 협력

협력은 한 객체가 혼자 도저히 감당이 안될 때 다른 객체에게 요청을 보내는 경우 협력이 시작된다.

즉 협력의 목적은 동일한 목적을 달성하기 위함이다.

## 책임

객체의 책임은 크게 아는 것과 하는 것으로 분류할 수 있다.

- 하는 것

  - 객체를 생성하거나 계산을 하는 등 스스로 하는 것
  - 다른 객체의 행동을 시작시키는 것
  - 다른 객체의 활동을 제어하고 조절하는 것

- 아는 것
  - 개인적인 정보에 관해 아는 것
  - 관련된 객체에 관해 아는 것
  - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

즉 정리를 하자면 책임은 외부에 제공해 줄 수 있는 정보(아는 것)와 외부에 제공해 줄 수 있는 서비스(하는 것)의 목록을 말한다.

=> 객체의 공용 인터페이스

## 역할

역할은 책임을 포함하고 있는 친구다.

이 역할이라는 것은 같은 책임을 수행하는 다른 역할로 바꾸더라도 협력은 정상적으로 돌아간다는 특징이 있다.

예를 들어 재판을 하는데 왕이 재판을 진행할 때와 여왕이 재판을 진행할 때 모두 재판이 진행이 된다.

여기서 역할이 바뀌더라도 재판은 정상적으로 진행되는 것을 확인할 수 있다.

위 설명을 통해 역할은 협력을 추상화할 수 있다는 사실도 느껴진다.

왕 - 토끼 - 장수 => 판사 - 토끼 - 증인 (추상화)

즉 역할을 대체한다는 것은 동일한 방식으로 메시지 처리가 가능해야 한다는 것이다.

따라서 역할은 단순성, 유연성, 재사용성을 뒷받침한다.

## 제일 핵심인 협력

올바른 객체를 설계하기 위한 방법

1. 견고하고 깔끔한 협력 설계

   => 객체들이 주고받을 요청과 응답의 흐름 결정

2. 저 흐름은 객체가 수행할 책임이 된다.

   => 행동을 결정

3. 행동에 필요한 데이터 고민

4. 클래스 구현 방법 결정

## 객체지향 설계 기법

1. 책임 주도 설계

   1. 사용자에게 제공해야 하는 기능인 시스템 책임 파악
   2. 더 작은 책임으로 분할
   3. 책임을 수행할 수 있는 적절한 객체, 역할을 찾아 책임을 할당
   4. 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
   5. 두 객체가 협력한다.

2. 디자인 패턴

   반복적으로 발생하는 문제와 그 문제에 대한 해법의 쌍으로 정의된다.

   디자인 패턴을 통해 설계를 할 수 있고, 문제 해결에 있어서 영감이 될 수 있다.

   라이브러리, 프레임워크 설계의 기반이 되기도 한다.

3. 테스트 주도 개발

   테스트 주도 개발은 책임을 수행할 객체 또는 클라이언트가 기대하는 객체의 역할이 메시지를 수신할 때 어떤 결과를 반환하고 그 과정에서 어떤 객체와 협력할 것인지에 대한 기대를 코드의 형태로 작성하는 것이다.

   사실 테스트 주도 개발을 하고 싶은데 어떻게 해야하는지 막막했었다.

   테스트를 어떤 식으로 짜야하는지도 막막했다.

   책을 읽다보니 책임 주도 설계 먼저 잘 할 줄 알아야 한다는 것이었다.

   책임주도설계를 할 수 있다면 테스트를 작성할 때도 어떻게 협력을 하며 요청과 응답을 주고 받을지 작성할 수 있다는 것이다.

   결국 책임 주도 설계의 기본 개념과 패턴을 종합적으로 이해한 수 좋은 설계에 대한 감각과 경험이 우선시 돼야할 것 같다.

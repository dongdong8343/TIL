Tomcat과 Jetty 중 어떤 서블릿 컨테이너를 사용할지 선택이 돼야 제대로 실행된다.

그렇게 하려면 구성 클래스에 @Conditional이라는 애노테이션을 사용하면된다.

이를 조건부 자동 구성이라고 하고 말 그대로 조건에 따라 빈을 등록하고 싶을 때 사용한다.

@Conditional을 사용하기 위해서는 Condition 인터페이스를 구현한 클래스를 지정해야한다.

그래서 아래와 같이 코드를 작성했고 true를 리턴하는 구성 클래스만 빈으로 등록이 돼서 정상적으로 애플리케이션이 동작하는 것을 확인할 수 있다.

```java
@MyAutoConfiguration
@Conditional(TomcatWebServerConfig.TomcatCondition.class)
public class TomcatWebServerConfig {
	@Bean("tomcatWebServerFactory")
	public ServletWebServerFactory servletWebServerFactory() {
		return new TomcatServletWebServerFactory();
	}

	static class TomcatCondition implements Condition {
		@Override
		public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
			return true;
		}
	}
}
```

```java
@MyAutoConfiguration
@Conditional(JettyWebServerConfig.JettyCondition.class)
public class JettyWebServerConfig {
	@Bean("jettyWebServerFactory")
	public ServletWebServerFactory servletWebServerFactory() {
		return new JettyServletWebServerFactory( );
	}

	static class JettyCondition implements Condition {
		// JettyWebServerConfig를 빈으로 등록할 것인지 무시할 것인지 스프링 컨테이너에 알려줌.
		@Override
		public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
			return false;
		}
	}
}
```

- 앞에서 Client 쪽의 코드는 사실 두 개의 책임을 가진다. 하나의 클래스는 하나의 책임만 가지는 것이 좋다.

  - 의존 관계를 설정해주는 책임
  - Service를 이용해 업무를 진행하는 책임

- 두 개의 책임을 가지고 있는 것을 하나의 책임만 가지도록 하고 싶다. 그래서 ObjectFactory라는 것을 만들어서 관계 설정 책임을 넘겨주려고 한다.

  아래 코드와 같이 관계 설정 책임이 ObjectFactory에 넘어간 것을 볼 수 있다. 그리고 새로운 Provider 클래스가 만들어진다고 해도 ObjectFactory의 코드만 수정하면 되기 때문에 Client 쪽에서 수정할 일이 없어졌다.

  ```java
  public class Client {

      public static void main(String[] args) throws IOException {
          ObjectFactory objectFactory = new ObjectFactory();
          PaymentService paymentService = objectFactory.paymentService();

          Payment payment = paymentService.prepare(100L, "USD", BigDecimal.valueOf(50.7));
          System.out.println(payment);
      }

  }

  public class ObjectFactory {
      public PaymentService paymentService() {
          return new PaymentService(exRateProvider());
      }

      public ExRateProvider exRateProvider() {
          return new WebApiExRateProvider();
      }
  }

  ```

기존에는 프론트 컨트롤러가 HelloController를 만들어서 서블릿 컨테이너에 넣어서 사용을 했었다.

하지만 이번에는 스프링 컨테이너 안에 HelloController를 담아두고 스프링 컨테이너를 사용하는 방식으로 변경할 것이다.

스프링 컨테이너가 하는 일은 다음과 같다.

우리가 만든 비즈니스 오브젝트와 구성 정보를 받아서 빈들을 구성해서 서버 애플리케이션이 잘 동작할 수 있도록 도와준다.

스프링 컨테이너를 통해 빈을 등록할 것이기 때문에 서블릿 컨테이너는 빈이 어떻게 만들어지는지 알 필요가 없다.

```java
public class TobyspringbootApplication {

	public static void main(String[] args) {

		// 스프링 컨테이너 만들기
		GenericApplicationContext applicationContext = new GenericApplicationContext();
		applicationContext.registerBean(HelloController.class); // 빈 등록
		applicationContext.refresh(); // 빈 오브젝트를 만드는 작업

		ServletWebServerFactory serverFactory = new TomcatServletWebServerFactory();

		// 서블릿 컨테이너를 만드는 생성 함수
		WebServer webServer = serverFactory.getWebServer(servletContext -> {

			servletContext.addServlet("frontController", new HttpServlet() {
				@Override
				protected void service(HttpServletRequest req, HttpServletResponse resp) throws
					ServletException,
					IOException {
					// hello로 get 요청이 들어오는 경우 처리
					if (req.getRequestURI().equals("/hello") && req.getMethod().equals(HttpMethod.GET.name())) {
						String name = req.getParameter("name");

						// 헬로 컨트롤러에서 요청을 처리하는 부분
						HelloController helloController = applicationContext.getBean(HelloController.class);
						String ret = helloController.hello(name);

						resp.setContentType(MediaType.TEXT_PLAIN_VALUE);
						resp.getWriter().println(ret);
					} else {
						resp.setStatus(HttpStatus.NOT_FOUND.value());
					}
				}
			}).addMapping("/*"); // / 밑으로 들어오는 모든 요청을 처리 => 프론트 컨트롤러의 역할
		});
		// 톰캣 서블릿 컨테이너 동작
		webServer.start();
	}

}

```

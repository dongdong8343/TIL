- Separation of concerns (SoC) 라고 한다.

- 만약 얘기를 하는데 관심사를 동시에 여러개 말한다고 가정해보자. 그럼 어떤 관심사에 초점을 둬야할지 파악하기 어렵고 대화에 집중하기도 어렵다.

  코드도 마찬가지다. 코드를 보는데 안에 관심사가 여러 개 있다면 코드를 읽기 쉽지 않을 것이다.

  그래서 우리는 관심사 분리를 통해 코드를 읽기 쉽고 재사용성과 유지보수성을 챙겨보려고 한다.

- 아래 코드를 먼저 보자.

  아래 코드는 관심사를 크게 2개로 나눌 수 있다.

  1. 환율을 가져오는 작업
  2. 원화로 변경하고 언제까지 유효하게 할 것인지 설정하는 작업

  ```java
  public class PaymentService {

      public Payment prepare(Long orderId, String currency, BigDecimal foreignCurrencyAmount) throws
          IOException {
          // 환율 가져오기
          // 만약 환율을 가져오는 방식이 변경되면 아래 코드는 변경될 것이다.
          URL url = new URL("https://open.er-api.com/v6/latest/" + currency);
          HttpURLConnection connection = (HttpURLConnection)url.openConnection();
          BufferedReader br = new BufferedReader(
              new InputStreamReader(connection.getInputStream()));
          String response = br.lines().collect(Collectors.joining());
          br.close();

          ObjectMapper mapper = new ObjectMapper();
          ExRateData data = mapper.readValue(response, ExRateData.class);
          BigDecimal exRate = data.rates().get("KRW");

          // 외화를 어떻게 원화로 변경하고 얼마동안 적용할 것인지에 대한 내용이 변경되면 아래 코드는 변경됨.
          BigDecimal convertedAmount = foreignCurrencyAmount.multiply(exRate);
          LocalDateTime validUntil = LocalDateTime.now().plusMinutes(30);

          return new Payment(orderId, currency, foreignCurrencyAmount, exRate, convertedAmount, validUntil);
      }
  }
  ```

  2개의 작업은 변경 이유도 다르고 변경 시점도 다르다는 것을 쉽게 파악할 수 있다.

  환율을 가져오는 작업은 환율을 가져오는 방식이 달라지면 코드가 수정이 될 것이다.

  그리고 원화로 변경하고 얼마동안 적용할 것인지는 비즈니스 정책이 수정되면 바뀔 가능성이 있다.

  이런 코드는 관심사를 분리해주는 것이 좋다.

  추가로 내가 코드를 작성할 때 회원가입 시 이메일 검증과 비밀번호 검증 하는 로직을 아무 생각없이 그냥 별도로 나누면 코드가 깔끔해지겠다고 생각하고 클래스로 분리했었다.

  지금 와서 생각해보니 비즈니스 정책이 변경되면 검증하는 로직이 달라질 수 있다.

  그리고 관심사를 분리함으로써 재사용성 측면, 테스트 측면에서도 유리하게 작용한다는 것을 이해했다.

  관심사를 분리하는 방법을 다음 내용에서 설명할 예정이다.

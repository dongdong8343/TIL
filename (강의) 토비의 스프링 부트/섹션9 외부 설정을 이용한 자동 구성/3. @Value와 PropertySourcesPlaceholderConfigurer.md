Environment 값을 읽어올 때 @Value를 통해서 읽어오는 방법도 있다.

```java
@MyAutoConfiguration
@ConditionalMyOnClass("org.apache.catalina.startup.Tomcat")
public class TomcatWebServerConfig {
	@Value("${contextPath}")
	String contextPath;

	@Bean("tomcatWebServerFactory")
	@ConditionalOnMissingBean
	public ServletWebServerFactory servletWebServerFactory() {
		TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory();
		System.out.println(this.contextPath);
		factory.setContextPath(this.contextPath); // 모든 서블릿의 매핑 앞에 여기서 설정한 ContextPath가 추가됨

		return factory;
	}
}
```

그러나 위 코드처럼 작성하고 바로 실행을 하면 정상적으로 값을 못읽어온다.

그 이유는 플레이스 홀더 치환기가 빈 정의를 만들기 전에 ${}를 실제 값으로 치환해야 하는데 그러지 못했기 때문이다.

이 일을 하는게 `PropertySourcesPlaceholderConfigurer` 라는 `BeanFactoryPostProcessor`다.

그래서 `PropertySourcesPlaceholderConfigurer` 는 자동 구성 빈으로 등록이 돼야해서 autoConfig 패키지 안에 생성해줬다.

```java
@MyAutoConfiguration
public class PropertyPlaceholderConfig {
	@Bean
	PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {
		return new PropertySourcesPlaceholderConfigurer();
	}
}

```

그리고 이렇게만 하면 등록이 안되기 때문에 ~~.imports 파일에 작성해서 실제로 빈으로 등록될 수 있게했다.

```java
...
tobyspring.config.autoconfig.PropertyPlaceholderConfig
```

- DIP라고 한다. Dependecy Inversion Principle

- 상위 수준의 모듈은 하위 수준의 모듈에 의존해서는 안된다. 둘 다 추상화에 의존해야한다.

- 추상화는 구체적인 사항에 의존하면 안된다. 구체적인 사항은 추상화에 의존해야한다.

- 위 두가지를 만족하는 것이 의존성 역전 원칙이라고 할 수 있다.

- 기본적으로 코드를 작성하면 아래 그림과 같이 상위 모듈이 하위 모듈에 의존하는 구조가 된다.

    <center>
      <img
          src="https://github.com/user-attachments/assets/2c63ea6b-1a7f-4c5e-93b1-be9968938a2b"
          width="100%"
      />
    </center>

  즉 DIP를 만족하지 못한다는 것이다.

  하위 모듈이 변경되면 상위 모듈에 영향이 간다. 이는 좋지 않은 설계다.

  보통 상위 모듈은 비즈니스 정책, 로직을 담당한다. 그리고 하위 모듈은 상위 모듈이 잘 동작하도록 보조적인 메커니즘을 담당한다.

  알다시피 비즈니스 로직은 자주 변경되는 것이 아니다. 하지만 하위 모듈은 어쩌면 자주 변경이 될 수 있는데 변경될 때마다 상위 모듈도 같이 변경돼야하는게 맞을까? 나는 아니라고 본다.

- 그럼 DIP를 만족하게 바꾸려면 어떻게 해야할까?

  일단 구체적인 대상에 의존하고 있으니까 인터페이스를 사용해서 추상화에 의존할 수 있도록 수정해보자.

    <center>
      <img
          src="https://github.com/user-attachments/assets/30bb4dc9-685b-4910-a8ab-73989d670a9b"
          width="100%"
      />
    </center>

  하지만 아직 상위 모듈이 하위 모듈에 의존하고 있는 것을 볼 수 있다.

  DIP 원칙에 맞게 수정하려면 인터페이스를 구현한 쪽이 아니라 사용하는 쪽에 올리는 것이 맞다. **(인터페이스 소유권의 역전)**

  그럼 아래와 같이 변경이 될 것이다.

    <center>
      <img
          src="https://github.com/user-attachments/assets/c166f5c7-7618-485b-9ac5-ad5960a9b58a"
          width="100%"
      />
    </center>

- 맨 위에어 설명했던 상위 모듈이 하위 모듈을 의존하는 구조에서 두 모듈 다 추상화에 의존하는 방식으로 변경하면서 역전이 일어난다고 해서 의존성 역전 원칙인것이다.
